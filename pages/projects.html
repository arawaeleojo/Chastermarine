<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects - Chastarmarine</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@400;700&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            color: #1F2937;
            /* Dark Gray */
            background-color: #F9FAFB;
            /* Light Gray */
            overflow-x: hidden;
        }

        h1,
        h2,
        h3,
        h4 {
            font-family: 'Playfair Display', serif;
        }

        /* Hero Image Background for Project Page */
            .hero-bg {
                background-image: url('../assets/img/marine-engineers.png');
                background-size: contain;
                background-position: center;
            }
        
            .hero-overlay {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.4);
                /* opacity: 70%;
                background: linear-gradient(to right, #1C457D, #3B82F6); */
            }
        .hero-gradient-overlay {
            background: linear-gradient(to right, #1C457D, #3B82F6);
            opacity: 0.9;
        }

        .text-shadow-custom {
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);
        }

        .nav-active {
            border-bottom: 2px solid #3B82F6;
            color: #3B82F6;
        }

        /* Modal Styles - Adapted for Tailwind consistency */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.9);
            padding-top: 60px;
        }

        /* Ensure modal content is centered and responsive */
        .modal-content-wrapper {
            margin: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 90%;
            max-width: 900px;
            height: 85%;
            position: relative;
        }

        .modal-image-full {
            max-width: 100%;
            max-height: 100%;
            display: block;
            margin: auto;
            border-radius: 8px;
            object-fit: contain;
        }

        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        .prev,
        .next {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            padding: 16px;
            margin-top: -50px;
            color: white;
            font-weight: bold;
            font-size: 20px;
            transition: 0.6s ease;
            user-select: none;
            -webkit-user-select: none;
            background-color: rgba(0, 0, 0, 0.5);
            /* Added background for visibility */
        }

        .prev {
            left: 0;
            border-radius: 0 3px 3px 0;
        }

        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }

        .prev:hover,
        .next:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        .gallery-item-project:hover {
            opacity: 0.8;
            transition: opacity 0.3s;
        }

        .eq-filter-active {
            background-color: #1C457D !important;
            color: white !important;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-white fixed w-full z-50 shadow-md">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <a href="index.html" class="flex items-center space-x-2">
                <span class="text-2xl font-bold text-gray-900">CHASTAR MARINE</span>
            </a>
            <div class="hidden md:flex space-x-8 text-sm font-semibold text-gray-700">
                <a href="../index.html" class="hover:text-blue-600 transition-colors">Home</a>
                <a href="about.html" class="hover:text-blue-600 transition-colors">About Us</a>
                <a href="services.html" class="hover:text-blue-600 transition-colors">Services</a>
                <a href="projects.html" class="hover:text-blue-600 transition-colors nav-active">Facilities</a>
                <a href="contact.html" class="hover:text-blue-600 transition-colors">Contact</a>
            </div>
            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-gray-900 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16m-7 6h7"></path>
                    </svg>
                </button>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-blue-50 transition-all duration-300 ease-in-out">
            <ul class="flex flex-col items-center py-4 space-y-4">
                <li><a href="../index.html" class="block text-gray-800 hover:text-blue-600 transition-colors py-2">Home</a>
                </li>
                <li><a href="about.html" class="block text-gray-800 hover:text-blue-600 transition-colors py-2">About
                        Us</a>
                </li>
                <li><a href="services.html"
                        class="block text-gray-800 hover:text-blue-600 transition-colors py-2">Services</a>
                </li>
                <li><a href="projects.html"
                        class="block text-gray-800 hover:text-blue-600 transition-colors py-2 nav-active">Facilities</a>
                </li>
                <li><a href="contact.html"
                        class="block text-gray-800 hover:text-blue-600 transition-colors py-2">Contact</a></li>
            </ul>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="h-[80vh] flex items-center justify-center hero-bg text-center relative" data-aos="fade-in"
            data-aos-duration="1500">
            <div class="absolute inset-0 hero-overlay"></div>
            <div class="relative z-10 p-8 rounded-xl max-w-4xl mx-auto" data-aos="zoom-in" data-aos-delay="300">
                <h1
                    class="text-4xl sm:text-5xl md:text-6xl font-extrabold mb-4 leading-tight text-white text-shadow-custom">
                    PROJECTS & ASSETS GALLERY
                </h1>
            </div>
        </section>

        <!-- 1. Projects Gallery (NO LIGHTBOX) -->
        <section class="py-20 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-4xl font-bold mb-12 text-blue-700 text-center" data-aos="fade-down">Explore Our Work
                </h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Gallery Item 1 -->
                    <div class="bg-gray-100 p-4 rounded-lg shadow-md gallery-item-project" data-aos="fade-up">
                        <img src="../assets/img/bulldozer.jpg"
                            alt="Bulldozer" class="w-full h-[300px] object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-bold text-center mb-2">Bulldozer</h3>
                        <p class="text-sm text-gray-600 text-center">Earth moving & site prep — grading, leveling works and foundational groundwork for marine infrastructure.</p>
                    </div>
                    <!-- Gallery Item 2 -->
                    <div class="bg-gray-100 p-4 rounded-lg shadow-md gallery-item-project" data-aos="fade-up"
                        data-aos-delay="200">
                        <img src="../assets/img/cranes.jpeg"
                            alt="Cranes (60T, 80T & 1220T)" class="w-full h-[300px] object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-bold text-center mb-2">Cranes (60T, 80T & 1220T)</h3>
                        <p class="text-sm text-gray-600 text-center">Heavy-lift cranes capable of moving large marine equipment and structures safely and efficiently.</p>
                    </div>
                    <!-- Gallery Item 3 -->
                    <div class="bg-gray-100 p-4 rounded-lg shadow-md gallery-item-project" data-aos="fade-up"
                        data-aos-delay="400">
                        <img src="../assets/img/Water-Tanker.jpg" alt="Water Tanker"
                            class="w-full h-[300px] object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-bold text-center mb-2">Water Tanker</h3>
                        <p class="text-sm text-gray-600 text-center">Vehicle for transporting and supplying large volumes of water to sites, vessels or remote locations.</p>
                    </div>
                    <!-- Gallery Item 4 -->
                    <div class="bg-gray-100 p-4 rounded-lg shadow-md gallery-item-project" data-aos="fade-up">
                        <img src="../assets/img/weldingmachines.jpg" alt="Heavy Machinery"
                            class="w-full h-[300px] object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-bold text-center mb-2">Welding Machines (Lincoln DC Generator)</h3>
                        <p class="text-sm text-gray-600 text-center">Powerful welding units driven by stable DC generators to support high-quality, precise welding work.</p>
                    </div>
                    <!-- Gallery Item 5 -->
                    <div class="bg-gray-100 p-4 rounded-lg shadow-md gallery-item-project" data-aos="fade-up"
                        data-aos-delay="200">
                        <img src="../assets/img/flushingpump.png"
                            alt="Welding Operations" class="w-full h-[300px] object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-bold text-center mb-2">Flushing Pump (Discharge Vol-20 gal/min)</h3>
                        <p class="text-sm text-gray-600 text-center">High-capacity pump for flushing operations — useful in maintenance or water removal tasks.</p>
                    </div>
                    <!-- Gallery Item 6 -->
                    <div class="bg-gray-100 p-4 rounded-lg shadow-md gallery-item-project" data-aos="fade-up"
                        data-aos-delay="400">
                        <img src="../assets/img/Heavy-Duty-Trucks.jpg"
                            alt="Subsea Installation" class="w-full h-[300px] object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-bold text-center mb-2">Heavy Duty Trucks</h3>
                        <p class="text-sm text-gray-600 text-center">Rugged transport vehicles to haul materials, equipment or marine components across site or dockyard.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. Equipment & Lifting Gear Gallery (WITH LIGHTBOX AND FILTERING) -->
        <section class="py-20 bg-gray-100">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-4xl font-bold mb-6 text-blue-700 text-center" data-aos="fade-down" data-aos-delay="100">
                    Equipment & Lifting Gear</h2>

                <!-- Filter Buttons -->
                <div id="equipment-filter-buttons" class="flex flex-wrap justify-center space-x-2 sm:space-x-4 mb-12"
                    data-aos="fade-up" data-aos-delay="200">
                    <button
                        class="eq-filter-button px-4 sm:px-6 py-2 rounded-full font-semibold transition-colors duration-300 bg-blue-700 text-white hover:bg-blue-800 eq-filter-active"
                        data-eq-category="all">All Equipment</button>
                    <button
                        class="eq-filter-button px-4 sm:px-6 py-2 rounded-full font-semibold transition-colors duration-300 bg-white text-gray-700 hover:bg-gray-200"
                        data-eq-category="lifting">Chains & Hoists</button>
                    <button
                        class="eq-filter-button px-4 sm:px-6 py-2 rounded-full font-semibold transition-colors duration-300 bg-white text-gray-700 hover:bg-gray-200"
                        data-eq-category="pumps">Pumps & Hoses</button>
                    <button
                        class="eq-filter-button px-4 sm:px-6 py-2 rounded-full font-semibold transition-colors duration-300 bg-white text-gray-700 hover:bg-gray-200"
                        data-eq-category="welding">Welding Gear</button>
                </div>


                <div id="equipment-gallery" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Equipment Item 1 (Chains & Hoists) -->
                    <div class="bg-white p-4 rounded-lg shadow-md cursor-pointer gallery-item" data-aos="fade-up"
                        data-eq-category="lifting">
                        <img src="https://placehold.co/600x400/3B82F6/FFFFFF?text=Chain+Blocks" alt="Chain Blocks"
                            class="w-full h-[300px] object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-bold text-center mb-2">Chain Blocks</h3>
                        <p class="text-sm text-gray-600 text-center">Heavy-duty chain blocks for vertical lifting
                            operations, fully certified.</p>
                    </div>
                    <!-- Equipment Item 2 (Chains & Hoists) -->
                    <div class="bg-white p-4 rounded-lg shadow-md cursor-pointer gallery-item" data-aos="fade-up"
                        data-aos-delay="100" data-eq-category="lifting">
                        <img src="https://placehold.co/600x400/3B82F6/FFFFFF?text=Lever+Hoists" alt="Lever Hoists"
                            class="w-full h-[300px] object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-bold text-center mb-2">Lever Hoists</h3>
                        <p class="text-sm text-gray-600 text-center">Compact and efficient lever hoists for tensioning,
                            pulling, and lifting.</p>
                    </div>
                    <!-- Equipment Item 3 (Chains & Hoists) -->
                    <div class="bg-white p-4 rounded-lg shadow-md cursor-pointer gallery-item" data-aos="fade-up"
                        data-aos-delay="200" data-eq-category="lifting">
                        <img src="https://placehold.co/600x400/3B82F6/FFFFFF?text=Rigging+Hardware"
                            alt="Rigging Hardware" class="w-full h-[300px] object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-bold text-center mb-2">Rigging Hardware</h3>
                        <p class="text-sm text-gray-600 text-center">Full range of shackles, hooks, and swivels
                            available for critical lifts.</p>
                    </div>
                    <!-- Equipment Item 4 (Pumps & Hoses) -->
                    <div class="bg-white p-4 rounded-lg shadow-md cursor-pointer gallery-item" data-aos="fade-up"
                        data-eq-category="pumps">
                        <img src="https://placehold.co/600x400/3B82F6/FFFFFF?text=Wire+Ropes" alt="Steel Wire Ropes"
                            class="w-full h-[300px] object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-bold text-center mb-2">Steel Wire Ropes & Slings</h3>
                        <p class="text-sm text-gray-600 text-center">High tensile strength steel wire ropes and
                            custom-made slings.</p>
                    </div>
                    <!-- Equipment Item 5 (Pumps & Hoses) -->
                    <div class="bg-white p-4 rounded-lg shadow-md cursor-pointer gallery-item" data-aos="fade-up"
                        data-aos-delay="100" data-eq-category="pumps">
                        <img src="https://placehold.co/600x400/3B82F6/FFFFFF?text=Flushing+Pump" alt="Flushing Pump"
                            class="w-full h-[300px] object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-bold text-center mb-2">Flushing Pump Unit</h3>
                        <p class="text-sm text-gray-600 text-center">Specialized pumps for system flushing and
                            cleanliness validation.</p>
                    </div>
                    <!-- Equipment Item 6 (Welding Gear) -->
                    <div class="bg-white p-4 rounded-lg shadow-md cursor-pointer gallery-item" data-aos="fade-up"
                        data-aos-delay="200" data-eq-category="welding">
                        <img src="https://placehold.co/600x400/3B82F6/FFFFFF?text=Welding+Machines"
                            alt="Welding Machines" class="w-full h-[300px] object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-bold text-center mb-2">Specialized Welding Machines</h3>
                        <p class="text-sm text-gray-600 text-center">High-performance machines for critical welding and
                            fabrication tasks.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- The Modal/Lightbox -->
        <div id="myModal" class="modal items-center justify-center">
            <span class="close">&times;</span>
            <div class="modal-content-wrapper">
                <img class="modal-image-full" id="modal-image" src="">
                <a class="prev">&#10094;</a>
                <a class="next">&#10095;</a>
            </div>
        </div>


        <!-- Call to Action Section -->
        <section class="py-20 bg-blue-600 text-center">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl sm:text-4xl font-bold text-white mb-6">Let's build something great together.
                </h2>
                <a href="contact.html"
                    class="px-8 py-4 bg-white text-blue-800 font-semibold rounded-full shadow-lg hover:bg-gray-200 transition-colors duration-300 transform hover:scale-105">
                    Request a Quote
                </a>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-950 py-12 text-slate-400">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <h4 class="text-lg font-bold mb-4 text-white">CHASTAR</h4>
                <p>Leading the way in marine and engineering solutions, with a focus on quality, safety, and
                    sustainability.</p>
                <div class="flex space-x-4 mt-4 text-slate-400">
                    <a href="#" class="hover:text-white transition-colors">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.769s.784-1.769 1.75-1.769 1.75.79 1.75 1.769-.784 1.769-1.75 1.769zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z">
                            </path>
                        </svg>
                    </a>
                    <a href="#" class="hover:text-white transition-colors">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.799-1.574 2.162-2.723-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.593 0-6.49 2.903-6.49 6.49 0 .509.058 1.005.174 1.485-5.392-.27-10.187-2.857-13.385-6.795-.569.981-.895 2.13-.895 3.331 0 2.24 1.133 4.215 2.898 5.371-.937-.03-1.815-.284-2.585-.712v.081c0 3.167 2.251 5.8 5.212 6.387-.545.149-1.114.237-1.701.237-.417 0-.82-.041-1.215-.116.834 2.576 3.242 4.463 6.134 4.516-2.239 1.756-5.074 2.809-8.156 2.809-.533 0-1.056-.032-1.57-.091 2.91 1.861 6.357 2.95 10.063 2.95 12.071 0 18.636-10.029 18.636-18.63 0-.174-.004-.349-.009-.523.518-.372.96-1.173 1.31-1.921z">
                            </path>
                        </svg>
                    </a>
                    <a href="#" class="hover:text-white transition-colors">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2 16h-2v-6h2v6zm-1-6.891c-.607 0-1.1-.496-1.1-1.109 0-.613.493-1.109 1.1-1.109s1.1.496 1.1 1.109c0 .613-.493 1.109-1.1 1.109zm8 6.891h-2v-3.493c0-.495-.008-.98-.016-1.472h-.01c-.426-.777-.925-1.516-1.637-1.516-1.246 0-1.745 1.05-1.745 2.58v3.9h-2v-6h2v.896c.712-.998 1.547-1.96 3.129-1.96 2.052 0 3.59 1.341 3.59 4.223v2.841z">
                            </path>
                        </svg>
                    </a>
                </div>
            </div>
            <div>
                <h4 class="text-lg font-bold mb-4 text-white">Quick Links</h4>
                <ul class="space-y-2">
                    <li><a href="index.html" class="hover:text-white transition-colors">Home</a></li>
                    <li><a href="about.html" class="hover:text-white transition-colors">About Us</a></li>
                    <li><a href="services.html" class="hover:text-white transition-colors">Services</a></li>
                    <li><a href="gallery.html" class="hover:text-white transition-colors">Gallery</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-lg font-bold mb-4 text-white">Contact Info</h4>
                <p><strong>Address:</strong> 123 Marine Way, Victoria Island, Lagos, Nigeria</p>
                <p class="mt-2"><strong>Phone:</strong> +234 123 456 789</p>
                <p class="mt-2"><strong>Email:</strong> info@chastarmarine.com</p>
            </div>
            <div>
                <h4 class="text-lg font-bold mb-4 text-white">Location</h4>
                <div class="rounded-lg overflow-hidden shadow-lg h-36 w-full">
                    <iframe
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3964.677551046187!2d3.4243673147703816!3d6.435728895318612!2m3!1f0!2f0!0f13.1!3m3!1m2!1s0x103bf5392264c483%3A0x673c6838a1a3648a!2sVictoria%20Island%2C%20Lagos%2C%20Nigeria!5e0!3m2!1sen!2sus!4v1628198759604!5m2!1sen!2sus"
                        width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                </div>
            </div>
        </div>
        <div class="border-t border-slate-700 mt-8 pt-8 text-center text-slate-500">
            &copy; 2024 Chastarmarine. All rights reserved.
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 1000,
            once: false,
            mirror: false,
        });

        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // --- Lightbox/Filter Functionality (Only targets the Equipment Gallery) ---
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById("myModal");
            const modalImg = document.getElementById("modal-image");

            // Target elements for filtering and interaction
            const equipmentGallery = document.getElementById("equipment-gallery");
            const allEqItems = equipmentGallery ? Array.from(equipmentGallery.querySelectorAll(".gallery-item")) : [];
            const eqFilterButtons = document.querySelectorAll('.eq-filter-button');
            const prevBtn = document.querySelector(".prev");
            const nextBtn = document.querySelector(".next");
            const closeBtn = document.querySelector(".close");

            let visibleItems = allEqItems;
            let currentImageIndex = 0;

            // 1. Filtering Logic
            const filterEquipment = (category) => {
                visibleItems = [];
                allEqItems.forEach(item => {
                    const itemCategory = item.getAttribute('data-eq-category');
                    const isVisible = category === 'all' || itemCategory === category;

                    if (isVisible) {
                        item.style.display = 'block';
                        visibleItems.push(item);
                    } else {
                        item.style.display = 'none';
                    }
                });
                // After filtering, update lightbox listeners (to ensure only visible items are navigable)
                updateLightboxListeners();
            };

            eqFilterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const category = button.getAttribute('data-eq-category');
                    filterEquipment(category);

                    // Update active state of buttons
                    eqFilterButtons.forEach(btn => {
                        btn.classList.remove('eq-filter-active', 'bg-blue-700', 'text-white');
                        btn.classList.add('bg-white', 'text-gray-700', 'hover:bg-gray-200'); // Reset non-active state
                    });
                    button.classList.add('eq-filter-active', 'bg-blue-700', 'text-white');
                    button.classList.remove('bg-white', 'text-gray-700', 'hover:bg-gray-200');
                });
            });

            // 2. Lightbox Listener & Update Logic
            const updateLightboxListeners = () => {
                // Attach click handlers only to the visible items
                allEqItems.forEach(item => {
                    // Remove existing listeners to prevent duplicates
                    item.onclick = null;

                    item.addEventListener("click", function handler() {
                        // Check if the item is currently visible before opening the modal
                        if (item.style.display === 'none') return;

                        modal.style.display = "flex";
                        modalImg.src = item.querySelector("img").src;

                        // Find index of clicked item within the currently visible list
                        currentImageIndex = visibleItems.indexOf(item);
                    });
                });
            };

            // 3. Navigation Logic
            const navigate = (direction) => {
                if (visibleItems.length === 0) return;

                currentImageIndex = (currentImageIndex + direction);
                if (currentImageIndex < 0) {
                    currentImageIndex = visibleItems.length - 1; // Wrap to end
                } else if (currentImageIndex >= visibleItems.length) {
                    currentImageIndex = 0; // Wrap to start
                }

                const nextImageSrc = visibleItems[currentImageIndex].querySelector("img").src;
                modalImg.src = nextImageSrc;
            };

            // Attach Nav listeners
            prevBtn.addEventListener("click", (e) => {
                e.stopPropagation();
                navigate(-1);
            });

            nextBtn.addEventListener("click", (e) => {
                e.stopPropagation();
                navigate(1);
            });

            // Close Modal listeners
            closeBtn.addEventListener("click", () => {
                modal.style.display = "none";
            });

            window.addEventListener("click", (event) => {
                if (event.target === modal) {
                    modal.style.display = "none";
                }
            });

            // Initial setup: Show all items
            filterEquipment('all');
        });
    </script>
</body>

</html>